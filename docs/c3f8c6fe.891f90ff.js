(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{117:function(e,n,t){"use strict";t.d(n,"a",(function(){return b})),t.d(n,"b",(function(){return m}));var r=t(0),i=t.n(r);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var u=i.a.createContext({}),s=function(e){var n=i.a.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},b=function(e){var n=s(e.components);return i.a.createElement(u.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return i.a.createElement(i.a.Fragment,{},n)}},d=i.a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),b=s(t),d=r,m=b["".concat(c,".").concat(d)]||b[d]||p[d]||o;return t?i.a.createElement(m,a(a({ref:n},u),{},{components:t})):i.a.createElement(m,a({ref:n},u))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,c=new Array(o);c[0]=d;var a={};for(var l in n)hasOwnProperty.call(n,l)&&(a[l]=n[l]);a.originalType=e,a.mdxType="string"==typeof e?e:r,c[1]=a;for(var u=2;u<o;u++)c[u]=t[u];return i.a.createElement.apply(null,c)}return i.a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},118:function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"a",(function(){return c}));var r=t(20),i=t(119);function o(){const{siteConfig:{baseUrl:e="/",url:n}={}}=Object(r.default)();return{withBaseUrl:(t,r)=>function(e,n,t,r){let{forcePrependBaseUrl:o=!1,absolute:c=!1}=void 0===r?{}:r;if(!t)return t;if(t.startsWith("#"))return t;if(Object(i.b)(t))return t;if(o)return n+t;const a=t.startsWith(n)?t:n+t.replace(/^\//,"");return c?e+a:a}(n,e,t,r)}}function c(e,n){void 0===n&&(n={});const{withBaseUrl:t}=o();return t(e,n)}},119:function(e,n,t){"use strict";function r(e){return!0===/^(\w*:|\/\/)/.test(e)}function i(e){return void 0!==e&&!r(e)}t.d(n,"b",(function(){return r})),t.d(n,"a",(function(){return i}))},97:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return l})),t.d(n,"metadata",(function(){return u})),t.d(n,"toc",(function(){return s})),t.d(n,"default",(function(){return p}));var r=t(3),i=t(7),o=(t(0),t(117)),c=t(118),a=["components"],l={id:"5_1_introduce",title:"5.1 \u670d\u52a1\u8d44\u6e90\u76d1\u63a7",sidebar_label:"5.1 \u670d\u52a1\u8d44\u6e90\u76d1\u63a7"},u={unversionedId:"5_1_introduce",id:"5_1_introduce",isDocsHomePage:!1,title:"5.1 \u670d\u52a1\u8d44\u6e90\u76d1\u63a7",description:"5.1.1 \u670d\u52a1\u8d44\u6e90\u603b\u89c8",source:"@site/docs\\5.1monitoring-system.mdx",slug:"/5_1_introduce",permalink:"/docs/5_1_introduce",editUrl:"https://github.com/duyanming/duyanming.github.com/tree/main/viper/docs/5.1monitoring-system.mdx",version:"current",sidebar_label:"5.1 \u670d\u52a1\u8d44\u6e90\u76d1\u63a7",sidebar:"docs",previous:{title:"4.1 \u7f51\u5173&\u76d1\u63a7",permalink:"/docs/4_1_introduce"},next:{title:"6.1 \u96c6\u7fa4\u63a5\u53e3\u6587\u6863",permalink:"/docs/6_1_introduce"}},s=[{value:"5.1.1 \u670d\u52a1\u8d44\u6e90\u603b\u89c8",id:"511-\u670d\u52a1\u8d44\u6e90\u603b\u89c8",children:[]},{value:"5.1.2 Anno.Plugs.MonitorService \u63d2\u4ef6\u89e3\u6790",id:"512-annoplugsmonitorservice-\u63d2\u4ef6\u89e3\u6790",children:[]},{value:"5.1.3 Anno.Plugs.MonitorService \u63d2\u4ef6\u4ee3\u7801",id:"513-annoplugsmonitorservice-\u63d2\u4ef6\u4ee3\u7801",children:[]}],b={toc:s};function p(e){var n=e.components,t=Object(i.a)(e,a);return Object(o.b)("wrapper",Object(r.a)({},b,t,{components:n,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"511-\u670d\u52a1\u8d44\u6e90\u603b\u89c8"},"5.1.1 \u670d\u52a1\u8d44\u6e90\u603b\u89c8"),Object(o.b)("div",{style:{width:"100%",textAlign:"center"}},Object(o.b)("img",{src:Object(c.a)("img/dashboard.jpg")})),Object(o.b)("p",null,"\u3000\u3000\u3000\u3000\u5728 ",Object(o.b)("code",null,"ViperService"),"\n\u5fae\u670d\u52a1\u4e2d\u5b89\u88c5\u83b7\u53d6\u670d\u52a1 ",Object(o.b)("code",null,"CPU"),"\u3001",Object(o.b)("code",null,"\u5185\u5b58"),"\u3001",Object(o.b)("code",null,"\u786c\u76d8\u5360\u7528"),"\u7684\u63d2\u4ef6"),Object(o.b)("code",null,"Anno.Plugs.MonitorService"),Object(o.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"\u76d1\u63a7\u63d2\u4ef6\u5f0f\u53ef\u9009\u7684\uff0c\u4e5f\u53ef\u4ee5\u4e0d\u7528\u5185\u7f6e\u7684\u8d44\u6e90\u83b7\u53d6\u65b9\u6cd5\u81ea\u5df1\u91cd\u65b0\u5b9e\u73b0")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"\u3000\u3000\u3000\u76d1\u63a7\u63d2\u4ef6",Object(o.b)("inlineCode",{parentName:"p"},"Anno.Plugs.MonitorService"),"\u7684\u5b9e\u73b0\u4e5f\u662f\u975e\u5e38\u7b80\u5355\u7684\uff0c\u5f00\u53d1\u8005\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u81ea\u5df1\u7684\u8d44\u6e90\u83b7\u53d6\u63d2\u4ef6\u3002\n\u4f46\u662f\u63d2\u4ef6\u7684\u540d\u79f0\u5fc5\u987b\u4e3a ",Object(o.b)("inlineCode",{parentName:"p"},"Anno.Plugs.MonitorService")," ,\u6a21\u5757\u540d\u79f0\u4e3a ",Object(o.b)("inlineCode",{parentName:"p"},"ResourceModule"),",\u65b9\u6cd5\u540d\u79f0\u4e3a",Object(o.b)("inlineCode",{parentName:"p"},"GetServerStatus"),"\u3002\n\u4e0b\u9762\u8bb2\u89e3\u4e0b\u5982\u4f55\u81ea\u5b9a\u4e49\u63d2\u4ef6"))),Object(o.b)("h2",{id:"512-annoplugsmonitorservice-\u63d2\u4ef6\u89e3\u6790"},"5.1.2 Anno.Plugs.MonitorService \u63d2\u4ef6\u89e3\u6790"),Object(o.b)("p",null,"\u3000\u3000\u3000\u65b0\u5efa\u4e00\u4e2a\u7c7b\u5e93\u540d\u79f0\u4e3a ",Object(o.b)("b",null,Object(o.b)("code",null,"Anno.Plugs.",Object(o.b)("inlineCode",{parentName:"p"},"XXX"),"Service")),"\uff0c\u6b64\u5904\u7684",Object(o.b)("code",null,"XXX"),"\u4ee3\u8868",Object(o.b)("inlineCode",{parentName:"p"},"Monitor"),"\u3002\n\u6211\u4eec\u63a8\u8350\u63d2\u4ef6\u63d2\u4ef6\u7684\u547d\u540d\u89c4\u8303\u4e3a",Object(o.b)("b",null,Object(o.b)("code",null,"Anno.Plugs.",Object(o.b)("inlineCode",{parentName:"p"},"XXX"),"Service")),"\uff0c\u8fd9\u6837Viper\u5728\u542f\u52a8\u7684\u65f6\u5019\u53ef\u4ee5\u81ea\u52a8\u53d1\u73b0\u63d2\u4ef6\n\uff0c\u4e0d\u9700\u8981\u989d\u5916\u7684\u505a\u624b\u5de5\u914d\u7f6e\u3002\u5426\u5219\u9700\u8981\u624b\u52a8\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff0c\u4f8b\u5982\u63d2\u4ef6\u540d\u79f0\u4e3a",Object(o.b)("inlineCode",{parentName:"p"},"Viper.LogService"),",\u5219\u4fee\u6539\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u7684 ",Object(o.b)("inlineCode",{parentName:"p"},"FuncName"),"\u8282\u70b9\u3002"),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"\u914d\u7f6e\u6587\u4ef6\uff1a",Object(o.b)("inlineCode",{parentName:"p"},"Viper\\ViperService\\Anno.config")),Object(o.b)("blockquote",{parentName:"blockquote"},Object(o.b)("pre",{parentName:"blockquote"},Object(o.b)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="utf-8" ?>\n<configuration>\n  \x3c!--0,0 \u7b2c\u4e00\u4f4d\u662f \u5de5\u4f5c\u7ad9\uff0c\u7b2c\u4e8c\u4f4d\u6570\u636e\u4e2d\u5fc3\n  \uff08\u6240\u6709\u7684 AnnoService \u7684 \u4e24\u4f4d\u6570\u4e0d\u80fd\u91cd\u590d\u4f8b\u5982\u4e0d\u80fd\u5b58\u5728\u30101,2\u3011\u30101,2\u3011\uff09\n  \u53ef\u4ee5\u5b58\u5728\u30101,2\u3011\u30102,1\u3011\n  --\x3e\n  <IdWorker>0,0</IdWorker>\n  \x3c!--App\u540d\u79f0--\x3e\n  <AppName>ViperService-01</AppName>\n  \x3c!--\u76d1\u542c\u7aef\u53e3--\x3e\n  <Port>7011</Port>\n  \x3c!--\u6743\u91cd--\x3e\n  <Weight>1</Weight>\n  \x3c!--\u529f\u80fd \u975eAnno.Plugs  \u52a0\u5165\u65b9\u5f0f,\u591a\u4e2a\u7528\u9017\u53f7`,`\u9694\u5f00--\x3e\n  <FuncName>Viper.LogService,xxx.LogService</FuncName>\n  \x3c!--\u5ffd\u7565\u7684\u529f\u80fd Trace,Logic--\x3e\n  <IgnoreFuncName></IgnoreFuncName>\n  \x3c!--\u8d85\u65f6\u65f6\u95f4\u6beb\u79d2--\x3e\n  <TimeOut>20000</TimeOut>\n  \x3c!--\u6ce8\u518c\u5230\u7684\u76ee\u6807--\x3e\n  <Ts Ip="127.0.0.1" Port="7010"/>\n  <IocDll>\n    ........\u7701\u7565...........\n  </IocDll>\n  <appSettings>\n    ........\u7701\u7565...........\n  </appSettings>\n</configuration>\n')))),Object(o.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"\u63d2\u4ef6\u547d\u540d\u89c4\u8303 \u7279\u522b\u6ce8\u610f")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"   1\u3001\u63d2\u4ef6\u540d\u79f0",Object(o.b)("inlineCode",{parentName:"p"},"\u7a0b\u5e8f\u96c6\u540d\u79f0"),"\u548c\u91cc\u9762\u7684",Object(o.b)("inlineCode",{parentName:"p"},"\u6a21\u5757\u547d\u540d\u7a7a\u95f4"),"\u540d\u79f0\u5fc5\u987b\u4e00\u81f4\uff0c\u7edf\u4e00\u4e3a",Object(o.b)("b",null,Object(o.b)("code",null,"Anno.Plugs.",Object(o.b)("inlineCode",{parentName:"p"},"XXX"),"Service")),"\uff0c\u4e0d\u540c\u63d2\u4ef6\u53ef\u4ee5\u4e0d\u4e00\u6837\u3002"),Object(o.b)("p",{parentName:"div"},"   2\u3001\u4e0d\u7ba1\u63d2\u4ef6\u540d\u79f0\u662f\u5426\u662f\u4ee5",Object(o.b)("inlineCode",{parentName:"p"},"Anno.Plugs."),"\u5f00\u59cb\u7ed3\u5c3e\u90fd\u5fc5\u987b\u662f",Object(o.b)("inlineCode",{parentName:"p"},"Service"),"\u3002\u4f8b\u5982\uff1a",Object(o.b)("b",null,Object(o.b)("code",null,Object(o.b)("inlineCode",{parentName:"p"},"XXX.XXX"),"Service"))),Object(o.b)("p",{parentName:"div"},"   3\u3001\u6a21\u5757\u540d\u79f0\u5fc5\u987b\u662f\u4ee5",Object(o.b)("inlineCode",{parentName:"p"},"Module"),"\u7ed3\u5c3e\uff0c\u4e14\u96c6\u6210",Object(o.b)("inlineCode",{parentName:"p"},"BaseModule")),Object(o.b)("p",{parentName:"div"},"   4\u3001\u65b9\u6cd5\u540d\u79f0\u4e0d\u505a\u7279\u6b8a\u9650\u5236\uff0c\u4f46\u662f\u8303\u56f4\u7c7b\u578b\u63a8\u8350\u4e3a ",Object(o.b)("inlineCode",{parentName:"p"},"ActionResult")))),Object(o.b)("h2",{id:"513-annoplugsmonitorservice-\u63d2\u4ef6\u4ee3\u7801"},"5.1.3 Anno.Plugs.MonitorService \u63d2\u4ef6\u4ee3\u7801"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Bootstrap.cs \u8fd9\u4e2a\u662f\u63d2\u4ef6\u7684\u521d\u59cb\u5316\u52a0\u8f7d\u5668"',title:'"Bootstrap.cs','\u8fd9\u4e2a\u662f\u63d2\u4ef6\u7684\u521d\u59cb\u5316\u52a0\u8f7d\u5668"':!0},"\nusing Anno.EngineData;\nusing System;\n\nnamespace Anno.Plugs.MonitorService\n{\n    public class Bootstrap : IPlugsConfigurationBootstrap\n    {\n        //\u63d2\u4ef6\u52a0\u8f7d\u524d\n        public void ConfigurationBootstrap()\n        {\n\n        }\n        //\u63d2\u4ef6\u52a0\u8f7d\u540e\n        public void PreConfigurationBootstrap()\n        {\n\n        }\n    }\n}\n\n")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-csharp",metastring:'title="ResourceModule.cs \u76d1\u63a7\u6a21\u5757"',title:'"ResourceModule.cs','\u76d1\u63a7\u6a21\u5757"':!0},'/****************************************************** \nWriter:Du YanMing\nMail:dym880@163.com\nCreate Date:2020/10/12 9:19:12 \nFunctional description\uff1a Resource\n******************************************************/\nusing Anno.Const.Attribute;\nusing Anno.EngineData;\nusing System;\nusing System.Collections.Generic;\nusing System.Text;\n\nnamespace Anno.Plugs.MonitorService\n{\n    public class ResourceModule : BaseModule\n    {\n        //\u83b7\u53d6\u670d\u52a1\u8d44\u6e90\u65b9\u6cd5\n        private static readonly EngineData.SysInfo.UseSysInfoWatch Usi = new EngineData.SysInfo.UseSysInfoWatch();\n        /// <summary>\n        /// \u670d\u52a1\u8d44\u6e90\u4fe1\u606f\n        /// </summary>\n        /// <returns></returns>\n        [AnnoInfo(Desc = "\u670d\u52a1\u8d44\u6e90\u4fe1\u606fCPU\u3001Memory")]\n        public ActionResult GetServerStatus()\n        {\n            return new ActionResult(true, Usi.GetServerStatus());\n        }\n    }\n}\n\n')))}p.isMDXComponent=!0}}]);